# 最小操作次数使数组元素相等 II

给你一个长度为 n 的整数数组 nums ，返回使所有数组元素相等需要的最小操作数。

在一次操作中，你可以使数组中的一个元素加 1 或者减 1 。

测试用例经过设计以使答案在 32 位 整数范围内。

示例 1：

```javascript
输入：nums = [1,2,3]
输出：2
解释：
只需要两次操作（每次操作指南使一个元素加 1 或减 1）：
[1,2,3]  =>  [2,2,3]  =>  [2,2,2]
```

示例 2：

```javascript
输入：nums = [1,10,2,9]
输出：16
```

提示：

- n == nums.length
- 1 <= nums.length <= 10^5
- -10^9 <= nums[i] <= 10^9

思路：

首先明确问题是要找到使所有数组元素相等的最小操作次数。初步思路可以考虑枚举所有可能的目标值，然后计算将数组中所有元素调整为该目标值所需的操作次数，最后取最小的操作次数。选择这种方法的理由是，通过枚举可以遍历所有可能的情况，一定能找到最小操作次数的解。另外，可以观察到如果将数组排序，取中间值作为目标值可能会比较高效，因为这样可以使一半的元素通过增加操作，一半的元素通过减少操作来达到目标值，可能会使总的操作次数最小。

1. 首先对数组进行排序，这样可以方便地找到中间值。排序的目的是为了更好地确定一个合适的目标值，使得将数组元素调整为该目标值时操作次数最小。
2. 计算数组的长度 `n`，并确定中间值 `x` 为排序后数组中索引为 `Math.floor(n / 2)` 的元素。取中间值作为目标值是因为这样可以使一半的元素通过增加操作，一半的元素通过减少操作来达到目标值，从而可能使总的操作次数最小。
3. 遍历数组，计算每个元素与中间值 `x` 的差值的绝对值，并累加到 `ret` 中。这个过程就是计算将每个元素调整为中间值所需的操作次数。

时间复杂度：排序操作通常需要 $O(n log n)$ 的时间，其中 `n` 是数组的长度。后续的遍历操作需要 $O(n)$ 的时间。所以总的时间复杂度为 $O(n log n)$。
空间复杂度：代码中只使用了有限的额外变量，不随输入规模增长，所以空间复杂度为 $O(1)$。

```javascript
var minMoves2 = function (nums) {
  nums.sort((a, b) => a - b);
  let n = nums.length,
    ret = 0,
    x = nums[Math.floor(n / 2)];
  for (let i = 0; i < n; i++) {
    ret += Math.abs(nums[i] - x);
  }
  return ret;
};
```
